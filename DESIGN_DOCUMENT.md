# ğŸ¨ Design Document - SmartBrain Care

> **à¹€à¸­à¸à¸ªà¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸£à¸°à¸šà¸š SmartBrain Care**  
> **Version 1.0.0** | à¸­à¸±à¸›à¹€à¸”à¸•à¸¥à¹ˆà¸²à¸ªà¸¸à¸”: 15 à¸à¸¸à¸¡à¸ à¸²à¸à¸±à¸™à¸˜à¹Œ 2026

---

## ğŸ“‹ à¸ªà¸²à¸£à¸šà¸±à¸

1. [System Overview](#-system-overview)
2. [Architecture Design](#-architecture-design)
3. [Class Diagram](#-class-diagram)
4. [Use Case Diagram](#-use-case-diagram)
5. [Sequence Diagrams](#-sequence-diagrams)
6. [Screen Flow Diagram](#-screen-flow-diagram)
7. [Data Flow Diagram](#-data-flow-diagram)
8. [Component Design](#-component-design)
9. [Database Design](#-database-design)
10. [Security Design](#-security-design)

---

## ğŸ›ï¸ System Overview

### 1.1 à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œà¸‚à¸­à¸‡à¸£à¸°à¸šà¸š
SmartBrain Care à¹€à¸›à¹‡à¸™à¹à¸­à¸›à¸à¸¥à¸´à¹€à¸„à¸Šà¸±à¸™ Flutter à¸ªà¸³à¸«à¸£à¸±à¸šà¸”à¸¹à¹à¸¥à¸ªà¸¸à¸‚à¸ à¸²à¸à¸ˆà¸´à¸• à¹‚à¸”à¸¢à¸œà¸ªà¸²à¸™à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ:
- **IoT** (Muse EEG Brainwave Sensor)
- **AI** (ChatGPT + RAG)
- **Mobile Development** (Flutter Cross-Platform)
- **Cloud Database** (Supabase PostgreSQL)

### 1.2 à¸‚à¸­à¸šà¹€à¸‚à¸•à¸£à¸°à¸šà¸š (System Scope)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     System Boundary                      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  User Module  â”‚  â”‚  EEG Moduleâ”‚  â”‚   AI Module   â”‚   â”‚
â”‚  â”‚              â”‚  â”‚            â”‚  â”‚               â”‚   â”‚
â”‚  â”‚ â€¢ Auth       â”‚  â”‚ â€¢ Connect  â”‚  â”‚ â€¢ ChatGPT     â”‚   â”‚
â”‚  â”‚ â€¢ Profile    â”‚  â”‚ â€¢ Monitor  â”‚  â”‚ â€¢ RAG         â”‚   â”‚
â”‚  â”‚ â€¢ Settings   â”‚  â”‚ â€¢ Record   â”‚  â”‚ â€¢ TTS/STT     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Health Module â”‚  â”‚Game Module â”‚  â”‚Schedule Moduleâ”‚   â”‚
â”‚  â”‚              â”‚  â”‚            â”‚  â”‚               â”‚   â”‚
â”‚  â”‚ â€¢ Stress Testâ”‚  â”‚ â€¢ Memory   â”‚  â”‚ â€¢ Daily Plan  â”‚   â”‚
â”‚  â”‚ â€¢ Emotion Logâ”‚  â”‚ â€¢ Puzzle   â”‚  â”‚ â€¢ Activities  â”‚   â”‚
â”‚  â”‚ â€¢ History    â”‚  â”‚ â€¢ Reaction â”‚  â”‚ â€¢ Track       â”‚   â”‚
â”‚  â”‚ â€¢ Emergency  â”‚  â”‚ â€¢ Color    â”‚  â”‚               â”‚   â”‚
â”‚  â”‚              â”‚  â”‚ â€¢ Checkers â”‚  â”‚               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Architecture Design

### 2.1 Layered Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PRESENTATION LAYER                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Welcome   â”‚  â”‚   Home     â”‚  â”‚   Chart    â”‚  â”‚   Test     â”‚  â”‚
â”‚  â”‚  Login     â”‚  â”‚  Screen    â”‚  â”‚  Screen    â”‚  â”‚  Screen    â”‚  â”‚
â”‚  â”‚  Register  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Chat     â”‚  â”‚  Profile   â”‚  â”‚  Settings  â”‚  â”‚   Games    â”‚  â”‚
â”‚  â”‚  (AI Bot)  â”‚  â”‚  Screen    â”‚  â”‚  Screen    â”‚  â”‚ (5 games)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     STATE MANAGEMENT LAYER                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              BrainProvider (ChangeNotifier)                 â”‚   â”‚
â”‚  â”‚   â€¢ currentUser  â€¢ brainwaveData  â€¢ isConnected            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       SERVICE LAYER                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚SupabaseServiceâ”‚ â”‚MuseService   â”‚ â”‚ChatGPTService            â”‚  â”‚
â”‚  â”‚(45 methods)   â”‚ â”‚(23 methods)  â”‚ â”‚(7 methods)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ RAGService   â”‚ â”‚ TTSService   â”‚ â”‚ STTService               â”‚  â”‚
â”‚  â”‚(15 methods)  â”‚ â”‚              â”‚ â”‚                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚FFTCalculator â”‚                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        MODEL LAYER                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ User   â”‚ â”‚BrainData â”‚ â”‚ChatMessageâ”‚ â”‚  Schedule  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚EEGDevice   â”‚ â”‚EEGSession    â”‚ â”‚EmotionLogâ”‚ â”‚VoiceMetadata   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚Conversation  â”‚ â”‚StressTestResultâ”‚ â”‚ElderlyProfileâ”‚   + more   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     DATA/EXTERNAL LAYER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Supabase    â”‚ â”‚  OpenAI API  â”‚ â”‚   Muse BLE Device        â”‚  â”‚
â”‚  â”‚ PostgreSQL   â”‚ â”‚  GPT-4o      â”‚ â”‚   (Bluetooth)            â”‚  â”‚
â”‚  â”‚ + pgvector   â”‚ â”‚  Embeddings  â”‚ â”‚                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Design Patterns à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰

| Pattern | à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰ | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” |
|---------|-------------|----------|
| **Provider Pattern** | BrainProvider | State management à¸—à¸±à¹ˆà¸§à¸—à¸±à¹‰à¸‡à¹à¸­à¸› |
| **Service Pattern** | à¸—à¸¸à¸ Service class | à¹à¸¢à¸ business logic à¸­à¸­à¸à¸ˆà¸²à¸ UI |
| **Singleton Pattern** | SupabaseService | Static methods, single instance |
| **Observer Pattern** | MuseService (ChangeNotifier) | à¹à¸ˆà¹‰à¸‡ UI à¹€à¸¡à¸·à¹ˆà¸­à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ EEG à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ |
| **Strategy Pattern** | RAGService search | Vector Search â†’ Keyword â†’ Broad |
| **Pipeline Pattern** | RAG Pipeline | Query â†’ Embed â†’ Search â†’ Context â†’ GPT |

---

## ğŸ“Š Class Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      <<StatelessWidget>> â”‚
â”‚          MyApp           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ + build()               â”‚
â”‚ â†’ ChangeNotifierProvider â”‚
â”‚ â†’ MaterialApp           â”‚
â”‚ â†’ WelcomeScreen         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Services (Static Classes)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  SupabaseService   â”‚    â”‚  ChatGPTService    â”‚                   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                   â”‚
â”‚  â”‚ -supabaseUrl      â”‚    â”‚ -_apiKey           â”‚                   â”‚
â”‚  â”‚ -supabaseAnonKey  â”‚    â”‚ -_baseUrl          â”‚                   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ -_ragEnabled       â”‚                   â”‚
â”‚  â”‚ +initialize()     â”‚    â”‚ -_userId           â”‚                   â”‚
â”‚  â”‚ +login()          â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                   â”‚
â”‚  â”‚ +register()       â”‚    â”‚ +sendMessage()     â”‚                   â”‚
â”‚  â”‚ +getProfile()     â”‚â—„â”€â”€â”€â”‚ +sendMessageWithRAG()â”‚                  â”‚
â”‚  â”‚ +updateProfile()  â”‚    â”‚ +sendMessageWith   â”‚                   â”‚
â”‚  â”‚ +changePassword() â”‚    â”‚  BrainwaveContext() â”‚                   â”‚
â”‚  â”‚ +saveBrainwave()  â”‚    â”‚ +setUserId()       â”‚                   â”‚
â”‚  â”‚ +getBrainwave()   â”‚    â”‚ +toggleRAG()       â”‚                   â”‚
â”‚  â”‚ +saveTestResult() â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚ +getTestResults() â”‚             â”‚ uses                          â”‚
â”‚  â”‚ +saveActivity()   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ +getActivities()  â”‚    â”‚   RAGService       â”‚                   â”‚
â”‚  â”‚ +getSchedules()   â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                   â”‚
â”‚  â”‚ +addSchedule()    â”‚    â”‚ -_openaiKey        â”‚                   â”‚
â”‚  â”‚ +deleteSchedule() â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                   â”‚
â”‚  â”‚ +sendChatMessage()â”‚â—„â”€â”€â”€â”‚ +createEmbedding() â”‚                   â”‚
â”‚  â”‚ +getChatHistory() â”‚    â”‚ +searchKnowledge() â”‚                   â”‚
â”‚  â”‚ +getSettings()    â”‚    â”‚ -_vectorSearch()   â”‚                   â”‚
â”‚  â”‚ +updateSettings() â”‚    â”‚ -_keywordSearch()  â”‚                   â”‚
â”‚  â”‚ +getEmergency()   â”‚    â”‚ -_broadSearch()    â”‚                   â”‚
â”‚  â”‚ +addEmergency()   â”‚    â”‚ +buildContext()    â”‚                   â”‚
â”‚  â”‚ +saveEmotionLog() â”‚    â”‚ +buildUserContext()â”‚                   â”‚
â”‚  â”‚ +getEmotionLogs() â”‚    â”‚ +addKnowledge()    â”‚                   â”‚
â”‚  â”‚ +deleteAccount()  â”‚    â”‚ +updateEmbeddings()â”‚                   â”‚
â”‚  â”‚ +registerDevice() â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚ +startSession()   â”‚                                              â”‚
â”‚  â”‚ +endSession()     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ +startConversationâ”‚    â”‚FFTCalculator       â”‚                   â”‚
â”‚  â”‚  ...45+ methods   â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ +compute()         â”‚                   â”‚
â”‚                            â”‚ +_fft()            â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚MuseService         â”‚                                             â”‚
â”‚  â”‚(ChangeNotifier)    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚  TTSService        â”‚                   â”‚
â”‚  â”‚ +alphaWave         â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                   â”‚
â”‚  â”‚ +betaWave          â”‚    â”‚ +speak()           â”‚                   â”‚
â”‚  â”‚ +thetaWave         â”‚    â”‚ +stop()            â”‚                   â”‚
â”‚  â”‚ +deltaWave         â”‚    â”‚ +setLanguage()     â”‚                   â”‚
â”‚  â”‚ +gammaWave         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚ +attention         â”‚                                             â”‚
â”‚  â”‚ +meditation        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ +isConnected       â”‚    â”‚  STTService        â”‚                   â”‚
â”‚  â”‚ +isScanning        â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ +initialize()      â”‚                   â”‚
â”‚  â”‚ +startScan()       â”‚    â”‚ +startListening()  â”‚                   â”‚
â”‚  â”‚ +connectToDevice() â”‚    â”‚ +stopListening()   â”‚                   â”‚
â”‚  â”‚ +disconnect()      â”‚    â”‚ +isAvailable()     â”‚                   â”‚
â”‚  â”‚ +startSimulation() â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚ -_processEEGData() â”‚                                             â”‚
â”‚  â”‚ -_calculateFFT()   â”‚                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Models (Data Classes)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     User       â”‚  â”‚   BrainData    â”‚  â”‚    ChatMessage         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ +id            â”‚  â”‚ +id            â”‚  â”‚ +id                    â”‚ â”‚
â”‚  â”‚ +username      â”‚  â”‚ +userId        â”‚  â”‚ +userId                â”‚ â”‚
â”‚  â”‚ +password      â”‚  â”‚ +alphaWave     â”‚  â”‚ +message               â”‚ â”‚
â”‚  â”‚ +fullName      â”‚  â”‚ +betaWave      â”‚  â”‚ +isBot                 â”‚ â”‚
â”‚  â”‚ +email         â”‚  â”‚ +thetaWave     â”‚  â”‚ +sentAt                â”‚ â”‚
â”‚  â”‚ +phone         â”‚  â”‚ +deltaWave     â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ +birthDate     â”‚  â”‚ +gammaWave     â”‚  â”‚ +fromJson()            â”‚ â”‚
â”‚  â”‚ +avatarUrl     â”‚  â”‚ +attention     â”‚  â”‚ +toJson()              â”‚ â”‚
â”‚  â”‚ +role          â”‚  â”‚ +meditation    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ +deviceName    â”‚                              â”‚
â”‚  â”‚ +fromJson()    â”‚  â”‚ +recordedAt    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ +toJson()      â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚   StressTestResult     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ +fromJson()    â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚                      â”‚ +toJson()      â”‚  â”‚ +stressScore           â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ +depressionScore       â”‚ â”‚
â”‚  â”‚  UserSettings  â”‚                      â”‚ +stressLevel           â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ +dailyReminder â”‚  â”‚   Schedule     â”‚                              â”‚
â”‚  â”‚ +weeklyReport  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ +stressAlert   â”‚  â”‚ +title         â”‚  â”‚    EmotionLog          â”‚ â”‚
â”‚  â”‚ +darkMode      â”‚  â”‚ +description   â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ +language      â”‚  â”‚ +time          â”‚  â”‚ +emotionType           â”‚ â”‚
â”‚  â”‚ +brainMode     â”‚  â”‚ +iconName      â”‚  â”‚ +triggerEvent          â”‚ â”‚
â”‚  â”‚ +fontSize      â”‚  â”‚ +color         â”‚  â”‚ +intensity             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ +isCompleted   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   EEGDevice    â”‚  â”‚  EEGSession    â”‚  â”‚   Conversation         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ +deviceName    â”‚  â”‚ +sessionType   â”‚  â”‚ +topicSummary          â”‚ â”‚
â”‚  â”‚ +modelName     â”‚  â”‚ +startedAt     â”‚  â”‚ +sentimentAvg          â”‚ â”‚
â”‚  â”‚ +serialNumber  â”‚  â”‚ +endedAt       â”‚  â”‚ +startedAt             â”‚ â”‚
â”‚  â”‚ +macAddress    â”‚  â”‚ +avgAttention  â”‚  â”‚ +endedAt               â”‚ â”‚
â”‚  â”‚ +batteryLevel  â”‚  â”‚ +avgRelaxation â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ +status        â”‚  â”‚ +dataQuality   â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   ElderlyProfile       â”‚  â”‚   VoiceMetadata        â”‚             â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚             â”‚
â”‚  â”‚ +firstName, lastName   â”‚  â”‚ +detectedLanguage      â”‚             â”‚
â”‚  â”‚ +bloodType             â”‚  â”‚ +durationSeconds       â”‚             â”‚
â”‚  â”‚ +medicalConditions[]   â”‚  â”‚ +sentimentScore        â”‚             â”‚
â”‚  â”‚ +allergies[]           â”‚  â”‚ +stressIndex           â”‚             â”‚
â”‚  â”‚ +currentMedications[]  â”‚  â”‚ +pitchAvg, volumeAvg   â”‚             â”‚
â”‚  â”‚ +mobilityStatus        â”‚  â”‚ +speechRate            â”‚             â”‚
â”‚  â”‚ +cognitiveStatus       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Use Case Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              SmartBrain Care System                  â”‚
                    â”‚                                                     â”‚
    â”Œâ”€â”€â”€â”           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
    â”‚   â”‚           â”‚  â”‚   Authentication Module   â”‚                      â”‚
    â”‚ U â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚  â—‹ Login                  â”‚                      â”‚
    â”‚ S â”‚           â”‚  â”‚  â—‹ Register               â”‚                      â”‚
    â”‚ E â”‚           â”‚  â”‚  â—‹ Change Password        â”‚                      â”‚
    â”‚ R â”‚           â”‚  â”‚  â—‹ Delete Account         â”‚                      â”‚
    â”‚   â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
    â”‚   â”‚           â”‚                                                     â”‚
    â”‚   â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
    â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚   EEG Monitoring Module   â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Connect Muse Device    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ View Real-time EEG     â”‚           â”‚         â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ View Charts            â”‚     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Save Brainwave Data    â”‚     â”‚ Muse S /  â”‚  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Use Simulation Mode    â”‚     â”‚ Muse 2    â”‚  â”‚
    â”‚   â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ (Device)  â”‚  â”‚
    â”‚   â”‚           â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚   â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
    â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚   Health Assessment       â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Take Stress Test       â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Log Emotions            â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ View History            â”‚                      â”‚
    â”‚   â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
    â”‚   â”‚           â”‚                                                     â”‚
    â”‚   â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚   AI Chatbot Module       â”‚â”€â”€â”€â”€â”€â”‚ OpenAI    â”‚  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Chat with AI           â”‚     â”‚ GPT-4o    â”‚  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Voice Input (STT)      â”‚     â”‚ API       â”‚  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Voice Output (TTS)     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Get Recommendations    â”‚                      â”‚
    â”‚   â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
    â”‚   â”‚           â”‚                                                     â”‚
    â”‚   â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
    â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚   Brain Games Module      â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Play Memory Game       â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Play Number Puzzle     â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Play Reaction Game     â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Play Color Sequence    â”‚                      â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Play Checkers          â”‚                      â”‚
    â”‚   â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
    â”‚   â”‚           â”‚                                                     â”‚
    â”‚   â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚   Profile & Settings      â”‚â”€â”€â”€â”€â”€â”‚ Supabase  â”‚  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ View/Edit Profile      â”‚     â”‚ Database  â”‚  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Manage Settings        â”‚     â”‚           â”‚  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Emergency Contacts     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚   â”‚           â”‚  â”‚  â—‹ Manage Schedule        â”‚                      â”‚
    â””â”€â”€â”€â”˜           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
                    â”‚                                                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Sequence Diagrams

### 5.1 Login Sequence

```
  User          LoginScreen      SupabaseService     Supabase DB
   â”‚                â”‚                   â”‚                 â”‚
   â”‚  Enter creds   â”‚                   â”‚                 â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                   â”‚                 â”‚
   â”‚                â”‚  login(user,pass) â”‚                 â”‚
   â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                 â”‚
   â”‚                â”‚                   â”‚  SELECT * FROM  â”‚
   â”‚                â”‚                   â”‚     users       â”‚
   â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚                â”‚                   â”‚                 â”‚
   â”‚                â”‚                   â”‚  user data /    â”‚
   â”‚                â”‚                   â”‚  not found      â”‚
   â”‚                â”‚                   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                â”‚  {success, id}    â”‚                 â”‚
   â”‚                â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
   â”‚  Navigate to   â”‚                   â”‚                 â”‚
   â”‚  HomeScreen    â”‚                   â”‚                 â”‚
   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚                 â”‚
```

### 5.2 AI Chat with RAG Sequence

```
  User       ChatScreen    ChatGPTService   RAGService    Supabase    OpenAI
   â”‚              â”‚              â”‚              â”‚            â”‚           â”‚
   â”‚  Send msg    â”‚              â”‚              â”‚            â”‚           â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚              â”‚            â”‚           â”‚
   â”‚              â”‚ sendMsgRAG() â”‚              â”‚            â”‚           â”‚
   â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚            â”‚           â”‚
   â”‚              â”‚              â”‚ searchKnow() â”‚            â”‚           â”‚
   â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚            â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚ embedding  â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚    POST    â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚              â”‚              â”‚              â”‚  vector    â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚              â”‚              â”‚              â”‚ pgvector   â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚ search     â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚ results    â”‚           â”‚
   â”‚              â”‚              â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
   â”‚              â”‚              â”‚ context       â”‚            â”‚           â”‚
   â”‚              â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚           â”‚
   â”‚              â”‚              â”‚                            â”‚           â”‚
   â”‚              â”‚              â”‚  POST chat/completions    â”‚           â”‚
   â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚              â”‚              â”‚  AI response              â”‚           â”‚
   â”‚              â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚              â”‚ response     â”‚              â”‚            â”‚           â”‚
   â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚            â”‚           â”‚
   â”‚  Display AI  â”‚              â”‚              â”‚            â”‚           â”‚
   â”‚  response    â”‚              â”‚              â”‚            â”‚           â”‚
   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚            â”‚           â”‚
   â”‚              â”‚ saveChatMsg()â”‚              â”‚            â”‚           â”‚
   â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           â”‚
```

### 5.3 EEG Monitoring Sequence

```
  User       HomeScreen     MuseService    FFTCalculator   Muse Device
   â”‚              â”‚              â”‚              â”‚              â”‚
   â”‚  Connect     â”‚              â”‚              â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚              â”‚              â”‚
   â”‚              â”‚ startScan()  â”‚              â”‚              â”‚
   â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚              â”‚
   â”‚              â”‚              â”‚  BLE scan    â”‚              â”‚
   â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚              â”‚              â”‚  devices[]   â”‚              â”‚
   â”‚              â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚  Select dev  â”‚              â”‚              â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚              â”‚              â”‚
   â”‚              â”‚ connect()    â”‚              â”‚              â”‚
   â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚              â”‚
   â”‚              â”‚              â”‚  BLE connect â”‚              â”‚
   â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚              â”‚              â”‚  services    â”‚              â”‚
   â”‚              â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚              â”‚              â”‚              â”‚              â”‚
   â”‚              â”‚              â”‚  â”€â”€â”€â”€ Continuous Loop â”€â”€â”€â”€  â”‚
   â”‚              â”‚              â”‚  EEG data    â”‚              â”‚
   â”‚              â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚              â”‚              â”‚ compute()    â”‚              â”‚
   â”‚              â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚
   â”‚              â”‚              â”‚ alpha,beta...â”‚              â”‚
   â”‚              â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
   â”‚              â”‚ notify       â”‚              â”‚              â”‚
   â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚
   â”‚  Update UI   â”‚              â”‚              â”‚              â”‚
   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚              â”‚              â”‚
```

---

## ğŸ”€ Screen Flow Diagram

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  App Launch  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                              â”‚   Welcome    â”‚
                              â”‚   Screen     â”‚
                              â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
                                 â”‚       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”    â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Login  â”‚    â”‚ Register â”‚
                        â”‚ Screen  â”‚    â”‚  Screen  â”‚
                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Main Navigationâ”‚
                     â”‚ (Bottom Tabs)  â”‚
                     â””â”€â”€â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”€â”€â”˜
                         â”‚ â”‚ â”‚ â”‚ â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚          â”Œâ”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”          â”‚
          â”‚          â”‚       â”‚       â”‚          â”‚
     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
     â”‚  Home   â”‚ â”‚Chartâ”‚ â”‚Test â”‚ â”‚Chat â”‚ â”‚Profile  â”‚
     â”‚ Screen  â”‚ â”‚     â”‚ â”‚     â”‚ â”‚(AI) â”‚ â”‚ Screen  â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
          â”‚                         â”‚          â”‚
     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚Activities     â”‚         â”‚ TTS/STTâ”‚  â”‚Edit Profile  â”‚
     â”‚Dashboard      â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚Change Pass   â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚Settings      â”‚
          â”‚                                â”‚Emergency     â”‚
     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚Notification  â”‚
     â”‚ Mini Games    â”‚                     â”‚Delete Accountâ”‚
     â”‚ â”œâ”€ Memory     â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ â”œâ”€ Puzzle     â”‚
     â”‚ â”œâ”€ Reaction   â”‚
     â”‚ â”œâ”€ Color Seq  â”‚
     â”‚ â””â”€ Checkers   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Diagram

### Level 0: Context Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                      â”‚
    â”Œâ”€â”€â”€â”  User    â”‚                      â”‚  EEG Data    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   â”‚  Input   â”‚                      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Muse S/  â”‚
    â”‚ U â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                      â”‚              â”‚ Muse 2   â”‚
    â”‚ S â”‚          â”‚   SmartBrain Care    â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ E â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        System        â”‚
    â”‚ R â”‚  Reports â”‚                      â”‚  AI Query    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   â”‚  & Data  â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ OpenAI   â”‚
    â””â”€â”€â”€â”˜          â”‚                      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   API    â”‚
                    â”‚                      â”‚  AI Response â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                      â”‚
                    â”‚                      â”‚  CRUD        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Supabase â”‚
                    â”‚                      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Database â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§± Component Design

### 7.1 Screen Components

| Screen | Components | Data Sources |
|--------|-----------|--------------|
| **WelcomeScreen** | Logo, AnimatedButton, BackgroundGradient | None |
| **LoginScreen** | TextFormField (username, password), ValidatedForm | SupabaseService |
| **RegisterScreen** | TextFormField (5 fields), DatePicker, ValidatedForm | SupabaseService |
| **HomeScreen** | BrainwaveGauge, DeviceConnector, WaveChart, SimulationToggle | MuseService, SupabaseService |
| **ChartScreen** | BarChart, LineChart, DataTable | SupabaseService |
| **TestScreen** | QuestionCard, ProgressBar, ResultCard | SupabaseService |
| **RecommendationScreen** | ChatBubble, VoiceButton, MessageInput | ChatGPTService, RAGService, TTS, STT |
| **ProfileScreen** | ProfileCard, MenuList, Avatar | SupabaseService |
| **SettingsScreen** | SwitchTile, MenuTile | SupabaseService |
| **MiniGamesScreen** | GameCard, GridView | SupabaseService |
| **MemoryGameScreen** | FlipCard, ScoreBoard, Timer | SupabaseService |
| **ReactionGameScreen** | ColorButton, Timer, ScoreDisplay | SupabaseService |

---

## ğŸ—„ï¸ Database Design

### 9.1 Normalization
- à¸—à¸¸à¸à¸•à¸²à¸£à¸²à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ **3NF (Third Normal Form)**
- à¹„à¸¡à¹ˆà¸¡à¸µ Transitive dependency
- Foreign Keys à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸œà¹ˆà¸²à¸™ `user_id`

### 9.2 Indexing Strategy
| Table | Index | Type |
|-------|-------|------|
| users | username | UNIQUE |
| brainwave_data | user_id, recorded_at | COMPOSITE |
| test_results | user_id, tested_at | COMPOSITE |
| knowledge_base | embedding | IVFFLAT (pgvector) |
| chat_messages | user_id, sent_at | COMPOSITE |

### 9.3 Row Level Security (RLS)
```sql
-- à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹€à¸«à¹‡à¸™à¹€à¸‰à¸à¸²à¸°à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¹€à¸­à¸‡
CREATE POLICY "Users can view own data" ON users
  FOR SELECT USING (true);

CREATE POLICY "Users can update own profile" ON users
  FOR UPDATE USING (true);
```

---

## ğŸ” Security Design

### 10.1 Authentication Flow
```
User â†’ [Username + Password] â†’ SupabaseService.login()
  â†’ Supabase DB (SELECT with password check)
  â†’ Return user_id (stored in Provider)
  â†’ All subsequent requests use user_id for RLS filtering
```

### 10.2 Security Measures

| Measure | Implementation |
|---------|---------------|
| **Password Security** | Hashed before storage |
| **API Key Protection** | Stored in service classes (not hardcoded in UI) |
| **Data Isolation** | Supabase RLS policies per user_id |
| **Input Validation** | Form validation on all input screens |
| **HTTPS** | All Supabase & OpenAI communication via HTTPS |
| **Bluetooth Security** | BLE encryption for Muse connection |

---

> **ğŸ“ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸**: à¹€à¸­à¸à¸ªà¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸™à¸µà¹‰à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸—à¸¸à¸ aspect à¸‚à¸­à¸‡ SmartBrain Care à¸•à¸±à¹‰à¸‡à¹à¸•à¹ˆ Architecture, Class Diagram, Use Case, Sequence Diagram, Screen Flow, Data Flow, Component Design, Database Design, à¹à¸¥à¸° Security Design
